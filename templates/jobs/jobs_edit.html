{% extends "base.html" %}

{% block title %}Edit Job - Catanduanes Connect{% endblock %}

{% block content %}
<style>
    /* Hide the base.html chat elements on this page */
    .fixed.bottom-6.right-6.z-50 {
        display: none !important;
    }

    #chat-modal {
        display: none !important;
    }

    .ai-circle {
        position: fixed;
        bottom: 30px;
        right: 30px;
        width: 70px;
        height: 70px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        z-index: 40;
        transition: all 0.3s ease;
    }
    
    .ai-circle:hover {
        transform: scale(1.1);
        box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
    }
    
    .ai-circle i {
        color: white;
        font-size: 28px;
    }
</style>

<div class="min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50">
    <!-- Header with Gradient Background -->
    <div class="bg-gradient-to-r from-blue-600 to-indigo-600 shadow-lg">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div class="text-center">
                <a href="{{ url_for('jobs.job_detail', job_id=job['id']) }}" class="inline-block text-blue-100 hover:text-white mb-4">
                    <i class="fas fa-arrow-left mr-2"></i>Back to Job
                </a>
                <div class="inline-flex items-center justify-center w-16 h-16 bg-white bg-opacity-20 rounded-full mb-4">
                    <i class="fas fa-edit text-3xl text-white"></i>
                </div>
                <h1 class="text-4xl font-bold text-white mb-3">Edit Job Posting</h1>
                <p class="text-blue-100 text-lg">Update your job details</p>
            </div>
        </div>
    </div>

    <!-- Form Container -->
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <div class="bg-white rounded-xl shadow-xl overflow-hidden">
            <form method="POST" enctype="multipart/form-data" class="space-y-8 p-8">
                {{ form.hidden_tag() if form else '' }}
                
                <!-- Job Information -->
                <div class="space-y-6">
                    <div class="flex items-center mb-6">
                        <div class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-bold mr-3">
                            1
                        </div>
                        <h2 class="text-2xl font-bold text-gray-900">Job Information</h2>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="title" class="block text-sm font-semibold text-gray-800 mb-3">
                                <i class="fas fa-briefcase text-blue-600 mr-2"></i>Job Title <span class="text-red-500">*</span>
                            </label>
                            <input type="text" name="title" id="title" value="{{ job.get('title', '') }}" 
                                   class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" 
                                   placeholder="e.g., Software Engineer, Sales Associate" required>
                        </div>
                        
                        <div>
                            <label for="category" class="block text-sm font-semibold text-gray-800 mb-3">
                                <i class="fas fa-tag text-blue-600 mr-2"></i>Job Category <span class="text-red-500">*</span>
                            </label>
                            <select name="category" id="category" 
                                    class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" required>
                                <option value="">Select Category</option>
                                <option value="IT" {% if job.get('category') == 'IT' %}selected{% endif %}>IT & Technology</option>
                                <option value="Sales" {% if job.get('category') == 'Sales' %}selected{% endif %}>Sales & Marketing</option>
                                <option value="Finance" {% if job.get('category') == 'Finance' %}selected{% endif %}>Finance & Accounting</option>
                                <option value="Healthcare" {% if job.get('category') == 'Healthcare' %}selected{% endif %}>Healthcare</option>
                                <option value="Education" {% if job.get('category') == 'Education' %}selected{% endif %}>Education</option>
                                <option value="Hospitality" {% if job.get('category') == 'Hospitality' %}selected{% endif %}>Hospitality & Tourism</option>
                                <option value="Other" {% if job.get('category') == 'Other' %}selected{% endif %}>Other</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="type" class="block text-sm font-semibold text-gray-800 mb-3">
                                <i class="fas fa-clock text-blue-600 mr-2"></i>Job Type <span class="text-red-500">*</span>
                            </label>
                            <select name="type" id="type" 
                                    class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" required>
                                <option value="">Select Type</option>
                                <option value="Full-time" {% if job.get('type') == 'Full-time' %}selected{% endif %}>Full-time</option>
                                <option value="Part-time" {% if job.get('type') == 'Part-time' %}selected{% endif %}>Part-time</option>
                                <option value="Contract" {% if job.get('type') == 'Contract' %}selected{% endif %}>Contract</option>
                                <option value="Temporary" {% if job.get('type') == 'Temporary' %}selected{% endif %}>Temporary</option>
                                <option value="Internship" {% if job.get('type') == 'Internship' %}selected{% endif %}>Internship</option>
                            </select>
                        </div>
                        
                        <div>
                            <label for="employment_type" class="block text-sm font-semibold text-gray-800 mb-3">
                                <i class="fas fa-map-pin text-blue-600 mr-2"></i>Employment Type <span class="text-red-500">*</span>
                            </label>
                            <select name="employment_type" id="employment_type" 
                                    class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" required>
                                <option value="">Select Type</option>
                                <option value="On-site" {% if job.get('employment_type') == 'On-site' %}selected{% endif %}>On-site</option>
                                <option value="Remote" {% if job.get('employment_type') == 'Remote' %}selected{% endif %}>Remote</option>
                                <option value="Hybrid" {% if job.get('employment_type') == 'Hybrid' %}selected{% endif %}>Hybrid</option>
                            </select>
                        </div>
                    </div>
                    
                    <div>
                        <label for="description" class="block text-sm font-semibold text-gray-800 mb-3">
                            <i class="fas fa-align-left text-blue-600 mr-2"></i>Job Description <span class="text-red-500">*</span>
                        </label>
                        <textarea name="description" id="description" 
                                  class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all h-32 resize-none"
                                  placeholder="Describe the job responsibilities, work environment, and what makes this position exciting..." required>{{ job.get('description', '') }}</textarea>
                        <p class="mt-2 text-sm text-gray-500"><i class="fas fa-info-circle mr-1"></i>Minimum 20 characters, maximum 2000 characters</p>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div>
                            <label for="salary_min" class="block text-sm font-semibold text-gray-800 mb-3">
                                <i class="fas fa-money-bill-wave text-blue-600 mr-2"></i>Minimum Salary (Optional)
                            </label>
                            <input type="number" name="salary_min" id="salary_min" value="{{ job.get('salary_min', '') }}" 
                                   class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" 
                                   placeholder="50000">
                        </div>
                        
                        <div>
                            <label for="salary_max" class="block text-sm font-semibold text-gray-800 mb-3">
                                <i class="fas fa-money-bill-wave text-blue-600 mr-2"></i>Maximum Salary (Optional)
                            </label>
                            <input type="number" name="salary_max" id="salary_max" value="{{ job.get('salary_max', '') }}" 
                                   class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" 
                                   placeholder="80000">
                        </div>
                        
                        <div>
                            <label for="currency" class="block text-sm font-semibold text-gray-800 mb-3">
                                <i class="fas fa-globe text-blue-600 mr-2"></i>Currency
                            </label>
                            <select name="currency" id="currency" 
                                    class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
                                <option value="PHP" {% if job.get('currency') == 'PHP' %}selected{% endif %}>Philippine Peso (PHP)</option>
                                <option value="USD" {% if job.get('currency') == 'USD' %}selected{% endif %}>US Dollar (USD)</option>
                                <option value="EUR" {% if job.get('currency') == 'EUR' %}selected{% endif %}>Euro (EUR)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="location" class="block text-sm font-semibold text-gray-800 mb-3">
                                <i class="fas fa-map-marker-alt text-blue-600 mr-2"></i>Job Location <span class="text-red-500">*</span>
                            </label>
                            <input type="text" name="location" id="location" value="{{ job.get('location', '') }}" 
                                   class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" 
                                   placeholder="e.g., Catanduanes, Remote" required>
                        </div>
                        
                        <div>
                            <label for="deadline" class="block text-sm font-semibold text-gray-800 mb-3">
                                <i class="fas fa-calendar-alt text-blue-600 mr-2"></i>Application Deadline (Optional)
                            </label>
                            <input type="date" name="deadline" id="deadline" value="{{ job.get('deadline', '') }}" 
                                   class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
                        </div>
                    </div>
                </div>
                
                <!-- Requirements & Benefits -->
                <div class="space-y-6 border-t-2 border-gray-200 pt-8">
                    <div class="flex items-center mb-6">
                        <div class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-bold mr-3">
                            2
                        </div>
                        <h2 class="text-2xl font-bold text-gray-900">Requirements & Benefits</h2>
                    </div>
                    
                    <div>
                        <label for="requirements" class="block text-sm font-semibold text-gray-800 mb-3">
                            <i class="fas fa-list-check text-blue-600 mr-2"></i>Requirements (Optional)
                        </label>
                        <textarea name="requirements" id="requirements" 
                                  class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all h-24 resize-none" 
                                  placeholder="List the required qualifications, skills, and experience...">{{ job.get('requirements', '') }}</textarea>
                        <p class="mt-2 text-sm text-gray-500"><i class="fas fa-info-circle mr-1"></i>Maximum 1000 characters</p>
                    </div>
                    
                    <div>
                        <label for="benefits" class="block text-sm font-semibold text-gray-800 mb-3">
                            <i class="fas fa-star text-blue-600 mr-2"></i>Benefits (Optional)
                        </label>
                        <textarea name="benefits" id="benefits" 
                                  class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all h-24 resize-none" 
                                  placeholder="Describe the benefits and perks offered with this position...">{{ job.get('benefits', '') }}</textarea>
                        <p class="mt-2 text-sm text-gray-500"><i class="fas fa-info-circle mr-1"></i>Maximum 1000 characters</p>
                    </div>
                </div>
                
                <!-- Submit Buttons -->
                <div class="border-t-2 border-gray-200 pt-8 flex gap-4">
                    <a href="{{ url_for('jobs.job_detail', job_id=job['id']) }}" 
                       class="flex-1 px-6 py-3 bg-gray-300 text-gray-900 rounded-lg font-semibold hover:bg-gray-400 transition-colors text-center">
                        <i class="fas fa-times mr-2"></i>Cancel
                    </a>
                    <button type="submit" 
                            class="flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-indigo-700 transition-all shadow-lg">
                        <i class="fas fa-save mr-2"></i>Save Changes
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

{% endblock %}
